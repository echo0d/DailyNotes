---
category: C++
tags:
  - Cpp
---

# 05. C++ 重载运算符和重载函数

在 C++ 中，**重载（Overloading）** 是一种允许在同一个作用域中定义多个同名函数或运算符的特性。通过重载，函数或运算符可以根据参数类型、数量或顺序的不同来实现不同的功能。重载分为**函数重载**和**运算符重载**两种。

---

## 1 **函数重载**
函数重载是指在同一个作用域中定义多个同名函数，但这些函数的参数列表（参数的类型、数量或顺序）必须不同。编译器通过参数列表来区分调用的是哪个函数。

### 1.1 **规则**
- 函数名相同。
- 参数列表必须不同（参数的类型、数量或顺序）。
- 返回值类型不能作为函数重载的依据。

### 1.2 **示例**
```cpp
#include <iostream>
using namespace std;

// 函数重载示例
void print(int i) {
    cout << "整数: " << i << endl;
}

void print(double d) {
    cout << "浮点数: " << d << endl;
}

void print(const string& s) {
    cout << "字符串: " << s << endl;
}

int main() {
    print(10);           // 调用第一个print函数
    print(3.14);         // 调用第二个print函数
    print("Hello");      // 调用第三个print函数
    return 0;
}
```

### 1.3 **注意事项**
- 参数的默认值可能会导致歧义，因此在重载时应避免使用默认参数。
- 函数指针的使用可能会导致重载函数的调用不明确。

---

## 2 **运算符重载**
运算符重载是指为 C++ 中的运算符赋予新的功能，使其能够作用于用户自定义类型（如类或结构体）。通过运算符重载，可以让自定义类型的对象像内置类型一样使用运算符。

### 2.1 **规则**
- 运算符必须是类的成员函数或全局函数。
- 至少有一个操作数是用户自定义类型（不能对内置类型的运算符进行重载）。
- 不能重载以下运算符：
  - `::`（作用域解析运算符）
  - `.`（成员访问运算符）
  - `.*`（成员指针访问运算符）
  - `sizeof`（大小运算符）
  - `typeid`（类型信息运算符）

### 2.2 **示例**
```cpp
#include <iostream>
using namespace std;

class Complex {
private:
    double real, imag;
public:
    Complex(double r, double i) : real(r), imag(i) {}

    // 重载加法运算符
    Complex operator+(const Complex& other) const {
        return Complex(real + other.real, imag + other.imag);
    }

    // 重载输出运算符
    friend ostream& operator<<(ostream& os, const Complex& c) {
        os << c.real << " + " << c.imag << "i";
        return os;
    }
};

int main() {
    Complex c1(1.0, 2.0), c2(3.0, 4.0);
    Complex c3 = c1 + c2; // 使用重载的加法运算符
    cout << "c1 + c2 = " << c3 << endl; // 使用重载的输出运算符
    return 0;
}
```

### 2.3 **注意事项**
- 运算符重载应遵循直观性和一致性原则，避免引入歧义。
- 重载的运算符应尽量保持与其原始语义一致。

---

## 3 **函数重载与运算符重载的区别**
| 特性        | 函数重载     | 运算符重载           |
| --------- | -------- | --------------- |
| 作用对象      | 普通函数     | 运算符             |
| 是否必须是成员函数 | 否        | 部分运算符必须是成员函数    |
| 参数要求      | 参数列表必须不同 | 至少有一个参数是用户自定义类型 |
| 使用场景      | 提供多种函数实现 | 自定义类型支持运算符操作    |

---

## 4 **重载的优点**
- 提高代码的可读性和可维护性。
- 使代码更具灵活性，支持多种输入类型。
- 允许用户自定义类型与内置类型具有类似的操作方式。

## 5 **重载的限制**
- 不能通过返回值类型区分重载函数。
- 某些运算符无法重载。
- 可能会引入歧义，导致代码难以理解。

通过重载，C++ 提供了强大的多态性支持，使得代码更加灵活和易用。