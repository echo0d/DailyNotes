<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.8" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.27" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="alternate" type="application/atom+xml" href="https://echo0d.github.io/DailyNotes/atom.xml" title="echo0d'notes Atom Feed"><link rel="alternate" type="application/json" href="https://echo0d.github.io/DailyNotes/feed.json" title="echo0d'notes JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://echo0d.github.io/DailyNotes/rss.xml" title="echo0d'notes RSS Feed"><title>12. åå°„ | echo0d'notes</title><meta name="description" content="echo0d'notes-vuepress">
    <link rel="preload" href="/DailyNotes/assets/style-Ck379rO9.css" as="style"><link rel="stylesheet" href="/DailyNotes/assets/style-Ck379rO9.css">
    <link rel="modulepreload" href="/DailyNotes/assets/app-DtCYmMlo.js"><link rel="modulepreload" href="/DailyNotes/assets/ch12.html-Dkezn7dI.js"><link rel="modulepreload" href="/DailyNotes/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/DailyNotes/assets/index.html-CIcDc8J4.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-Cky76yiG.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/DailySkills.html-70jRoHI6.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/Treasure.html-BKQVmnUl.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1-FileSystem.html-CBjddAhl.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2-commandExecute.html-CMCZJ0su.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/3-Database.html-CCaW7R2U.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/4-JNDI.html-D6R2TmCo.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/5-reflection.html-C0rztCAj.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/6-ClassLoader.html-jlX4B06x.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/7-DynamicProxy.html-BRac508w.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1-JavaEE.html-BUGUPcXe.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2-JavaMVC.html-DGpkaO6B.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/3-JavaWeb_Servlet.html-zzqHaIS4.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/4-JavaWeb_filter.html-Lh_Bi04D.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/5-JavaWeb_Listener.html-mXhPXPlQ.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/6-CookieAndSession.html-CP8ahfqk.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/7-JSP.html-CqNjlNZ6.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/JavaVul.html-Dz1myuN0.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/deserialize.html-Ctn5cM_0.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/GoVul.html-BLesLNF9.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1-CTF_WEB.html-Dpv0PVGg.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-EJdn-XXj.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ExecuteAssembly.html-BMf2ZAdc.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/RDI.html-CE--tYj2.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-DeXncloJ.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-Cyj_RUOg.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1_syntax.html-ytvrC6gB.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2_VariableTypes.html-STNGV7kj.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-PrQyxYrr.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-BweNjEmI.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-D6IN6oVb.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/React_Typescript_antd.html-jtzhjnFj.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1_JavaBase.html-aU6JIDY8.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2_ObjectOriented.html-BcHLvoDm.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/3_CoreClass.html-CS7X7qbM.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/4_Exception.html-GvgdCm5Y.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/5_Reflection.html-xpPTXPUB.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/6_Annotation.html-itDe0WVJ.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/7_Genericity.html-BjAyeWjU.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-SHisq8nV.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/test_django.html-CBTBUD9a.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1_InformationGathering.html-CMO1YmRB.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2_Intranet_windows.html-Vy-Akeht.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/3_CDN.html-Cg5j7afQ.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1_LinuxPersistence.html-DGYjjBdX.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2_WindowsPersistence.html-GYLAPdNA.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/3_ProcessInjection.html-NVw4bK_6.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1_Linux.html-BYe34K_r.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2_Windows.html-C2jhCP9M.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/Intranet_tunnel.html-CCzwHFKz.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/Tamper.html-YPEOO-ym.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/TracesRemoval.html-aSIZ8-0R.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/Burpsuite.html-DXp-aU7k.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/SQLmap.html-BpXvmCRF.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/Tunnel.html-DSV9vFkM.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/WebShell.html-t7m_-bkX.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/openwrt.html-Ct66TeHm.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/1_GoFinal.html-kp-RsyEl.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/2_fscanPro.html-CM6vzPAu.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-fOreWI0n.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-DeLbWdSa.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch1.html-CnxQJ4q6.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch10.html-CGtwRMkX.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch11.html-g8d8RHd4.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch2.html-DRkbSOEi.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch3.html-BoNDZLKe.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch4.html-CUOCSxom.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch5.html-DrinbrG5.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch6.html-WyCLb_fT.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ch7.html-v0kcgXN8.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/node_CVE-2017-14849.html-pPw488gg.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/tomcat_CVE-2017-12615.html-JjNrR_XD.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/tomcat_CVE-2020-1938.html-CPvQWG5X.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/weblogic_CVE-2017-10271.html-CY0HoaW2.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/weblogic_CVE-2018-2894.html-BC3N7Czw.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/weblogic_CVE-2020-14882.html-CW62_Wbw.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/FastjsonVul.html-DLXSoAr_.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/log4j2 .html-6H-FxH36.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/shiro.html-Bjetg5en.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/ååºåˆ—åŒ–_shiro_CVE-2019-12422_shiro721ååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œæ¼æ´.html-BqN8fbHh.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/æƒé™ç»•è¿‡_shiro_CVE-2020-11989_Apache Shiro782æƒé™ç»•è¿‡æ¼æ´.html-Bl1n1FD9.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/æƒé™ç»•è¿‡_shiro_CVE-2020-13933_Apache Shiroæƒé™ç»•è¿‡æ¼æ´.html-BUHA9hjd.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/spring.html-DqBCfkDC.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/spring_CVE-2018-1273_bypass.html-CrckZNE3.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/supervisor_CVE-2017-11610.html-Ch52bJXA.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/xstream_CVE-2021-21351.html-C5-l2a2M.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/C3.html-CCUQtIxA.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/CS.html-D1Pxh2w8.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/MSFUse.html-B13g6LP5.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/MSF_CS.html-BrY7ZpZ1.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/404.html-DvLcnHDF.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-RXfxaQZY.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-C35Hrvqg.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-CK9sHMYq.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-DqyhqQoJ.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-BA8QjJDF.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-CbN2sH5l.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-CvynFgBn.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-CXOsGs7V.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-CAcHVPgG.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-BGqnabjl.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-DhQRnXbY.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-DFh_2B93.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-BT5yU1vG.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-D3duNfss.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-B62peBmV.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-BAy2_vAP.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-CsAkZAzC.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-lQGjILgS.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-Cpj3JkVV.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-927eCgR0.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-BKvxNL2v.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-Cvjgqi1U.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-COwGFg3J.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-pbz9i5ue.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-DjhT8CCH.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/index.html-Bd_NlZSm.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/DailyNotes/assets/SearchResult-DwUA88os.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/DailyNotes/"><img class="vp-nav-logo" src="/DailyNotes/logo.jpg" alt><!----><span class="vp-site-name hide-in-pad">echo0d&#39;notes</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/DailyNotes/CyberSecurity/" aria-label="ç½‘ç»œå®‰å…¨"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ç½‘ç»œå®‰å…¨<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/DailyNotes/CodeAudittutorial/" aria-label="ä»£ç å®¡è®¡"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>ä»£ç å®¡è®¡<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link active" href="/DailyNotes/develop/" aria-label="å¼€å‘æŠ€æœ¯"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>å¼€å‘æŠ€æœ¯<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/DailyNotes/others/" aria-label="å…¶ä»–éšç¬”"><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>å…¶ä»–éšç¬”<!----></a></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/echo0d/DailyNotes" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" class="outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">æœç´¢</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header clickable active"><!----><a class="route-link nav-link active vp-sidebar-title" href="/DailyNotes/develop/" aria-label="å¼€å‘æŠ€æœ¯"><!---->å¼€å‘æŠ€æœ¯<!----></a><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">C è¯­è¨€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">C++ç¬”è®°</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Go</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Goè¯­è¨€åœ£ç»</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/" aria-label="Goè¯­è¨€åœ£ç»"><!---->Goè¯­è¨€åœ£ç»<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch1.html" aria-label="01. å…¥é—¨"><!---->01. å…¥é—¨<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch2.html" aria-label="02. ç¨‹åºç»“æ„"><!---->02. ç¨‹åºç»“æ„<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch3.html" aria-label="03. åŸºç¡€æ•°æ®ç±»å‹"><!---->03. åŸºç¡€æ•°æ®ç±»å‹<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch4.html" aria-label="04. å¤åˆæ•°æ®ç±»å‹"><!---->04. å¤åˆæ•°æ®ç±»å‹<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch5.html" aria-label="05. å‡½æ•°"><!---->05. å‡½æ•°<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch6.html" aria-label="06. æ–¹æ³•"><!---->06. æ–¹æ³•<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch7.html" aria-label="07. æ¥å£"><!---->07. æ¥å£<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch10.html" aria-label="10. åŒ…å’Œå·¥å…·"><!---->10. åŒ…å’Œå·¥å…·<!----></a></li><li><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/DailyNotes/develop/Go/gopl/ch11.html" aria-label="11. æµ‹è¯•"><!---->11. æµ‹è¯•<!----></a></li><li><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/DailyNotes/develop/Go/gopl/ch12.html" aria-label="12. åå°„"><!---->12. åå°„<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Goè¯­è¨€ç²¾è¿›</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Python</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">å‰ç«¯</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->12. åå°„</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">echo0d</span></span><span property="author" content="echo0d"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-07-31T08:52:23.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 20 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT20M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!--[--><!----><!--]--><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/DailyNotes/#_12-1-ä¸ºä½•éœ€è¦åå°„">12.1. ä¸ºä½•éœ€è¦åå°„?</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/DailyNotes/#_12-2-reflect-type-å’Œ-reflect-value">12.2. reflect.Type å’Œ reflect.Value</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/DailyNotes/#reflect-type">reflect.Type</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/DailyNotes/#reflect-value">reflect.Value</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="/DailyNotes/#kind-æ–¹æ³•">Kind æ–¹æ³•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/DailyNotes/#_12-3-display-ä¸€ä¸ªé€’å½’çš„å€¼æ‰“å°å™¨">12.3. Displayï¼Œä¸€ä¸ªé€’å½’çš„å€¼æ‰“å°å™¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/DailyNotes/#_12-4-ç¤ºä¾‹-ç¼–ç ä¸ºsè¡¨è¾¾å¼">12.4. ç¤ºä¾‹: ç¼–ç ä¸ºSè¡¨è¾¾å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/DailyNotes/#_12-5-é€šè¿‡reflect-valueä¿®æ”¹å€¼">12.5. é€šè¿‡reflect.Valueä¿®æ”¹å€¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/DailyNotes/#_12-7-è·å–ç»“æ„ä½“å­—æ®µæ ‡ç­¾">12.7. è·å–ç»“æ„ä½“å­—æ®µæ ‡ç­¾</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="/DailyNotes/#_12-8-æ˜¾ç¤ºä¸€ä¸ªç±»å‹çš„æ–¹æ³•é›†">12.8. æ˜¾ç¤ºä¸€ä¸ªç±»å‹çš„æ–¹æ³•é›†</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h1 id="_12-åå°„" tabindex="-1"><a class="header-anchor" href="#_12-åå°„"><span>12. åå°„</span></a></h1><h2 id="_12-1-ä¸ºä½•éœ€è¦åå°„" tabindex="-1"><a class="header-anchor" href="#_12-1-ä¸ºä½•éœ€è¦åå°„"><span>12.1. ä¸ºä½•éœ€è¦åå°„?</span></a></h2><p>åœ¨ Go è¯­è¨€ä¸­ï¼Œåå°„ï¼ˆreflectionï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æœºåˆ¶ï¼Œå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹ä¿¡æ¯ã€æ“ä½œå˜é‡ã€è°ƒç”¨æ–¹æ³•ç­‰ã€‚Go çš„åå°„åŒ… <code>reflect</code> æä¾›äº†ä¸€ç»„åŠŸèƒ½ï¼Œè®©ç¨‹åºèƒ½å¤ŸåŠ¨æ€åœ°æ£€æŸ¥å’Œæ“ä½œå˜é‡ã€ç»“æ„ä½“ã€æ¥å£ç­‰ä¿¡æ¯ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§æƒ…å†µä¸‹ä½¿ç”¨åå°„çš„ä¾‹å­å’ŒåŸå› ï¼š</p><ol><li><strong>é€šç”¨ç¼–ç¨‹</strong>ï¼šåå°„å…è®¸ç¼–å†™é€šç”¨ä»£ç ï¼Œèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶å¤„ç†<strong>ä¸åŒç±»å‹çš„æ•°æ®ç»“æ„ï¼Œè€Œä¸éœ€è¦æå‰çŸ¥é“å…¶ç±»å‹ã€‚</strong></li><li><strong>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</strong>ï¼šé€šè¿‡åå°„ï¼Œå¯ä»¥åŠ¨æ€åœ°å°†ç»“æ„ä½“è½¬æ¢ä¸º JSONã€XML ç­‰æ ¼å¼ï¼Œæˆ–è€…å°†è¿™äº›æ ¼å¼è½¬æ¢å›ç»“æ„ä½“ã€‚</li><li><strong>åŠ¨æ€è°ƒç”¨æ–¹æ³•</strong>ï¼šåå°„å…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶è°ƒç”¨ç»“æ„ä½“çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦æå‰çŸ¥é“è¿™äº›æ–¹æ³•çš„åç§°ã€‚</li><li><strong>ç±»å‹æ£€æŸ¥å’Œç±»å‹æ–­è¨€</strong>ï¼šåå°„å¯ä»¥ç”¨äºæ£€æŸ¥å˜é‡çš„ç±»å‹ï¼Œå¹¶è¿›è¡Œç±»å‹æ–­è¨€ï¼Œç‰¹åˆ«åœ¨å¤„ç†æ¥å£æ—¶éå¸¸æœ‰ç”¨ã€‚</li><li><strong>ä»£ç ç”Ÿæˆ</strong>ï¼šæŸäº›æƒ…å†µä¸‹ï¼Œåå°„å¯ä»¥ç”¨äºç”Ÿæˆä»£ç ï¼Œä¾‹å¦‚åœ¨ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰åº“ä¸­åŠ¨æ€åˆ›å»ºæ•°æ®åº“æŸ¥è¯¢è¯­å¥ã€‚</li></ol><p>ä¸€ä¸ªæ ¼å¼åŒ–çš„å‡½æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆç”¨switchç±»å‹åˆ†æ”¯æ¥æµ‹è¯•è¾“å…¥å‚æ•°æ˜¯å¦å®ç°äº†Stringæ–¹æ³•ï¼Œå¦‚æœæ˜¯çš„è¯å°±è°ƒç”¨è¯¥æ–¹æ³•ã€‚ç„¶åç»§ç»­å¢åŠ ç±»å‹æµ‹è¯•åˆ†æ”¯ï¼Œæ£€æŸ¥è¿™ä¸ªå€¼çš„åŠ¨æ€ç±»å‹æ˜¯å¦æ˜¯stringã€intã€boolç­‰åŸºç¡€ç±»å‹ï¼Œå¹¶åœ¨æ¯ç§æƒ…å†µä¸‹æ‰§è¡Œç›¸åº”çš„æ ¼å¼åŒ–æ“ä½œã€‚</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Sprint</span><span class="token punctuation">(</span>x <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token keyword">type</span> stringer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
        <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">switch</span> x <span class="token operator">:=</span> x<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> stringer<span class="token punctuation">:</span>
        <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token builtin">string</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> x
    <span class="token keyword">case</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
    <span class="token comment">// ...similar cases for int16, uint32, and so on...</span>
    <span class="token keyword">case</span> <span class="token builtin">bool</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> x <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;true&quot;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;false&quot;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token comment">// array, chan, func, map, pointer, slice, struct</span>
        <span class="token keyword">return</span> <span class="token string">&quot;???&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯æˆ‘ä»¬å¦‚ä½•å¤„ç†å…¶å®ƒç±»ä¼¼<code>[]float64</code>ã€<code>map[string][]string</code>ç­‰ç±»å‹å‘¢ï¼Ÿæˆ‘ä»¬å½“ç„¶å¯ä»¥æ·»åŠ æ›´å¤šçš„æµ‹è¯•åˆ†æ”¯ï¼Œä½†æ˜¯è¿™äº›ç»„åˆç±»å‹çš„æ•°ç›®åŸºæœ¬æ˜¯æ— ç©·çš„ã€‚è¿˜æœ‰å¦‚ä½•å¤„ç†ç±»ä¼¼<code>url.Values</code>è¿™æ ·çš„å…·åç±»å‹å‘¢ï¼Ÿå³ä½¿ç±»å‹åˆ†æ”¯å¯ä»¥è¯†åˆ«å‡ºåº•å±‚çš„åŸºç¡€ç±»å‹æ˜¯<code>map[string][]string</code>ï¼Œä½†æ˜¯å®ƒå¹¶ä¸åŒ¹é…<code>url.Values</code>ç±»å‹ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹ï¼Œè€Œä¸”<code>switch</code>ç±»å‹åˆ†æ”¯ä¹Ÿä¸å¯èƒ½åŒ…å«æ¯ä¸ªç±»ä¼¼<code>url.Values</code>çš„ç±»å‹ï¼Œè¿™ä¼šå¯¼è‡´å¯¹è¿™äº›åº“çš„ä¾èµ–ã€‚</p><p>æ²¡æœ‰åŠæ³•æ¥æ£€æŸ¥æœªçŸ¥ç±»å‹çš„è¡¨ç¤ºæ–¹å¼ï¼Œæˆ‘ä»¬è¢«å¡ä½äº†ã€‚è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦åå°„çš„åŸå› ã€‚</p><h2 id="_12-2-reflect-type-å’Œ-reflect-value" tabindex="-1"><a class="header-anchor" href="#_12-2-reflect-type-å’Œ-reflect-value"><span>12.2. <code>reflect.Type</code> å’Œ <code>reflect.Value</code></span></a></h2><p>åå°„æ˜¯ç”± reflect åŒ…æä¾›çš„ã€‚å®ƒå®šä¹‰äº†ä¸¤ä¸ªé‡è¦çš„ç±»å‹ï¼ŒType å’Œ Valueã€‚</p><h3 id="reflect-type" tabindex="-1"><a class="header-anchor" href="#reflect-type"><span><code>reflect.Type</code></span></a></h3><p>ä¸€ä¸ª Type è¡¨ç¤ºä¸€ä¸ªGoç±»å‹ã€‚å®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæœ‰è®¸å¤šæ–¹æ³•æ¥åŒºåˆ†ç±»å‹ä»¥åŠæ£€æŸ¥å®ƒä»¬çš„ç»„æˆéƒ¨åˆ†ï¼Œä¾‹å¦‚ä¸€ä¸ªç»“æ„ä½“çš„æˆå‘˜æˆ–ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ç­‰ã€‚å”¯ä¸€èƒ½åæ˜  <code>reflect.Type</code> å®ç°çš„æ˜¯æ¥å£çš„ç±»å‹æè¿°ä¿¡æ¯ï¼ˆÂ§7.5ï¼‰ï¼Œä¹Ÿæ­£æ˜¯è¿™ä¸ªå®ä½“æ ‡è¯†äº†æ¥å£å€¼çš„åŠ¨æ€ç±»å‹ã€‚</p><p>å›å¿†ä¸€ä¸‹<code>interface{} </code>ç±»å‹ï¼Œå°±æ˜¯<strong>ç©ºæ¥å£</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸åŒ…å«ä»»ä½•æ–¹æ³•çš„æ¥å£ã€‚ç©ºæ¥å£å¯ä»¥è¡¨ç¤ºä»»æ„ç±»å‹ï¼Œå› ä¸ºå®ƒä¸é™åˆ¶å…¶å®ç°ç±»å‹ã€‚ç©ºæ¥å£åœ¨ Go ä¸­è¢«å¹¿æ³›åº”ç”¨ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€ç§åœ¨ä¸çŸ¥é“å…·ä½“ç±»å‹çš„æƒ…å†µä¸‹å­˜å‚¨å€¼çš„æ–¹æ³•ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ç©ºæ¥å£çš„ç‰¹ç‚¹å’Œç”¨é€”ï¼š</p><ol><li><strong>è¡¨ç¤ºä»»æ„ç±»å‹</strong>ï¼šç©ºæ¥å£å¯ä»¥æ¥å—ä»»ä½•ç±»å‹çš„å€¼ï¼Œå› ä¸ºå®ƒä¸åŒ…å«ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥ä»»ä½•ç±»å‹éƒ½æ»¡è¶³ç©ºæ¥å£çš„è¦æ±‚ã€‚</li><li><strong>ç±»å‹æ–­è¨€</strong>ï¼šä½¿ç”¨ç±»å‹æ–­è¨€å¯ä»¥å°†ç©ºæ¥å£ä¸­çš„å€¼è½¬æ¢ä¸ºå…·ä½“ç±»å‹ã€‚è¿™ä½¿å¾—åœ¨è¿è¡Œæ—¶èƒ½å¤Ÿå¤„ç†ä¸åŒç±»å‹çš„æ•°æ®ã€‚</li><li><strong>é€šç”¨å®¹å™¨</strong>ï¼šç©ºæ¥å£å¯ä»¥ç”¨ä½œé€šç”¨çš„å®¹å™¨ï¼Œç”¨äºå­˜å‚¨ä¸åŒç±»å‹çš„å€¼ï¼Œç±»ä¼¼äº C# æˆ– Java ä¸­çš„ <code>Object</code> ç±»å‹ã€‚</li></ol><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> any <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// å®šä¹‰ä¸€ä¸ªç©ºæ¥å£</span>

    any <span class="token operator">=</span> <span class="token number">42</span> <span class="token comment">// å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>any<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º: 42</span>

    any <span class="token operator">=</span> <span class="token string">&quot;Hello, Go!&quot;</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>any<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º: Hello, Go!</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡½æ•°<code>reflect.TypeOf</code> æ¥å—ä»»æ„çš„ <code>interface{} </code>ç±»å‹ï¼Œå¹¶ä»¥<code>reflect.Type</code>å½¢å¼è¿”å›å…¶åŠ¨æ€ç±»å‹ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>t := reflect.TypeOf(3)  // a reflect.Type
fmt.Println(t.String()) // &quot;int&quot;
fmt.Println(t)          // &quot;int&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­<code>TypeOf(3) </code>è°ƒç”¨å°†å€¼ 3 ä¼ ç»™ <code>interface{}</code> å‚æ•°ã€‚å›åˆ° 7.5èŠ‚ çš„å°†ä¸€ä¸ªå…·ä½“çš„å€¼è½¬ä¸ºæ¥å£ç±»å‹ä¼šæœ‰ä¸€ä¸ªéšå¼çš„æ¥å£è½¬æ¢æ“ä½œï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªä¿¡æ¯çš„æ¥å£å€¼ï¼šæ“ä½œæ•°çš„åŠ¨æ€ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ intï¼‰å’Œå®ƒçš„åŠ¨æ€çš„å€¼ï¼ˆè¿™é‡Œæ˜¯ 3ï¼‰ã€‚</p><p>å› ä¸º <code>reflect.TypeOf</code> è¿”å›çš„æ˜¯ä¸€ä¸ªåŠ¨æ€ç±»å‹çš„æ¥å£å€¼ï¼Œå®ƒæ€»æ˜¯è¿”å›å…·ä½“çš„ç±»å‹ã€‚å› æ­¤ï¼Œä¸‹é¢çš„ä»£ç å°†æ‰“å° <code>&quot;*os.File&quot; </code>è€Œä¸æ˜¯ <code>&quot;io.Writer&quot;</code>ã€‚ç¨åï¼Œæˆ‘ä»¬å°†çœ‹åˆ°èƒ½å¤Ÿè¡¨è¾¾æ¥å£ç±»å‹çš„<code> reflect.Type</code>ã€‚</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>var w io.Writer = os.Stdout
fmt.Println(reflect.TypeOf(w)) // &quot;*os.File&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦æ³¨æ„çš„æ˜¯ <code>reflect.Type</code> æ¥å£æ˜¯æ»¡è¶³ <code>fmt.Stringer</code> æ¥å£çš„ã€‚å› ä¸ºæ‰“å°ä¸€ä¸ªæ¥å£çš„åŠ¨æ€ç±»å‹å¯¹äºè°ƒè¯•å’Œæ—¥å¿—æ˜¯æœ‰å¸®åŠ©çš„ï¼Œ<code> fmt.Printf</code> æä¾›äº†ä¸€ä¸ªç¼©å†™ %T å‚æ•°ï¼Œå†…éƒ¨ä½¿ç”¨<code>reflect.TypeOf</code>æ¥è¾“å‡ºï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>fmt.Printf(&quot;%T\n&quot;, 3) // &quot;int&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="reflect-value" tabindex="-1"><a class="header-anchor" href="#reflect-value"><span><code>reflect.Value</code></span></a></h3><p><code>reflect</code> åŒ…ä¸­å¦ä¸€ä¸ªé‡è¦çš„ç±»å‹æ˜¯ Valueã€‚ä¸€ä¸ª <code>reflect.Value</code> å¯ä»¥è£…è½½ä»»æ„ç±»å‹çš„å€¼ã€‚å‡½æ•°<code> reflect.ValueOf</code> æ¥å—ä»»æ„çš„ <code>interface{}</code> ç±»å‹ï¼Œå¹¶è¿”å›ä¸€ä¸ªè£…è½½ç€å…¶åŠ¨æ€å€¼çš„ <code>reflect.Value</code>ã€‚å’Œ <code>reflect.TypeOf</code> ç±»ä¼¼ï¼Œ<code>reflect.ValueOf</code> è¿”å›çš„ç»“æœä¹Ÿæ˜¯å…·ä½“çš„ç±»å‹ï¼Œä½†æ˜¯ <code>reflect.Value</code> ä¹Ÿå¯ä»¥æŒæœ‰ä¸€ä¸ªæ¥å£å€¼ã€‚</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>v := reflect.ValueOf(3) // a reflect.Value
fmt.Println(v)          // &quot;3&quot;
fmt.Printf(&quot;%v\n&quot;, v)   // &quot;3&quot;
fmt.Println(v.String()) // NOTE: &quot;&lt;int Value&gt;&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å’Œ <code>reflect.Type</code> ç±»ä¼¼ï¼Œ<code>reflect.Value</code> ä¹Ÿæ»¡è¶³ <code>fmt.Stringer</code> æ¥å£ï¼Œä½†æ˜¯é™¤é<code> Value</code> æŒæœ‰çš„æ˜¯å­—ç¬¦ä¸²ï¼Œå¦åˆ™ <code>String</code> æ–¹æ³•åªè¿”å›å…¶ç±»å‹ã€‚è€Œä½¿ç”¨ <code>fmt</code> åŒ…çš„<code> %v</code> æ ‡å¿—å‚æ•°ä¼šå¯¹<code> reflect.Values</code> ç‰¹æ®Šå¤„ç†ã€‚</p><p>å¯¹ Value è°ƒç”¨ Type æ–¹æ³•å°†è¿”å›å…·ä½“ç±»å‹æ‰€å¯¹åº”çš„ <code>reflect.Type</code>ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>t := v.Type()           // a reflect.Type
fmt.Println(t.String()) // &quot;int&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>reflect.ValueOf</code> çš„é€†æ“ä½œæ˜¯ <code>reflect.Value.Interface</code> æ–¹æ³•ã€‚å®ƒè¿”å›ä¸€ä¸ª <code>interface{}</code> ç±»å‹ï¼Œè£…è½½ç€ä¸ <code>reflect.Value</code> ç›¸åŒçš„å…·ä½“å€¼ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>v := reflect.ValueOf(3) // a reflect.Value
x := v.Interface()      // an interface{}
i := x.(int)            // an int
fmt.Printf(&quot;%d\n&quot;, i)   // &quot;3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>reflect.Value</code> å’Œ <code>interface{}</code> éƒ½èƒ½è£…è½½ä»»æ„çš„å€¼ã€‚æ‰€ä¸åŒçš„æ˜¯ï¼Œä¸€ä¸ªç©ºçš„æ¥å£éšè—äº†å€¼å†…éƒ¨çš„è¡¨ç¤ºæ–¹å¼å’Œæ‰€æœ‰æ–¹æ³•ï¼Œå› æ­¤åªæœ‰æˆ‘ä»¬çŸ¥é“å…·ä½“çš„åŠ¨æ€ç±»å‹æ‰èƒ½ä½¿ç”¨ç±»å‹æ–­è¨€æ¥è®¿é—®å†…éƒ¨çš„å€¼ï¼ˆå°±åƒä¸Šé¢é‚£æ ·ï¼‰ï¼Œå†…éƒ¨å€¼æˆ‘ä»¬æ²¡æ³•è®¿é—®ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸€ä¸ª Value åˆ™æœ‰å¾ˆå¤šæ–¹æ³•æ¥æ£€æŸ¥å…¶å†…å®¹ï¼Œæ— è®ºå®ƒçš„å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆã€‚</p><h3 id="kind-æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#kind-æ–¹æ³•"><span>Kind æ–¹æ³•</span></a></h3><p>è®©æˆ‘ä»¬å†æ¬¡å°è¯•å®ç°æ ¼å¼åŒ–å‡½æ•° <code>format.Any</code>ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>reflect.Value</code> çš„ <code>Kind</code> æ–¹æ³•æ¥æ›¿ä»£ä¹‹å‰çš„ç±»å‹ <code>switch</code>ã€‚è™½ç„¶è¿˜æ˜¯æœ‰æ— ç©·å¤šçš„ç±»å‹ï¼Œä½†æ˜¯å®ƒä»¬çš„ kinds ç±»å‹å´æ˜¯æœ‰é™çš„ï¼šBoolã€String å’Œ æ‰€æœ‰æ•°å­—ç±»å‹çš„åŸºç¡€ç±»å‹ï¼›Array å’Œ Struct å¯¹åº”çš„èšåˆç±»å‹ï¼›Chanã€Funcã€Ptrã€Slice å’Œ Map å¯¹åº”çš„å¼•ç”¨ç±»å‹ï¼›interface ç±»å‹ï¼›è¿˜æœ‰è¡¨ç¤ºç©ºå€¼çš„ Invalid ç±»å‹ã€‚ï¼ˆç©ºçš„ <code>reflect.Value</code> çš„ <code>kind</code> å³ä¸º Invalidã€‚ï¼‰</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>package format

import (
    &quot;reflect&quot;
    &quot;strconv&quot;
)

// Any formats any value as a string.
func Any(value interface{}) string {
    return formatAtom(reflect.ValueOf(value))
}

// formatAtom formats a value without inspecting its internal structure.
func formatAtom(v reflect.Value) string {
    switch v.Kind() {
    case reflect.Invalid:
        return &quot;invalid&quot;
    case reflect.Int, reflect.Int8, reflect.Int16,
        reflect.Int32, reflect.Int64:
        return strconv.FormatInt(v.Int(), 10)
    case reflect.Uint, reflect.Uint8, reflect.Uint16,
        reflect.Uint32, reflect.Uint64, reflect.Uintptr:
        return strconv.FormatUint(v.Uint(), 10)
    // ...floating-point and complex cases omitted for brevity...
    case reflect.Bool:
        return strconv.FormatBool(v.Bool())
    case reflect.String:
        return strconv.Quote(v.String())
    case reflect.Chan, reflect.Func, reflect.Ptr, reflect.Slice, reflect.Map:
        return v.Type().String() + &quot; 0x&quot; +
            strconv.FormatUint(uint64(v.Pointer()), 16)
    default: // reflect.Array, reflect.Struct, reflect.Interface
        return v.Type().String() + &quot; value&quot;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„å‡½æ•°å°†æ¯ä¸ªå€¼è§†ä½œä¸€ä¸ªä¸å¯åˆ†å‰²æ²¡æœ‰å†…éƒ¨ç»“æ„çš„ç‰©å“ï¼Œå› æ­¤å®ƒå« <code>formatAtom</code>ã€‚å¯¹äºèšåˆç±»å‹ï¼ˆç»“æ„ä½“å’Œæ•°ç»„ï¼‰å’Œæ¥å£ï¼Œåªæ˜¯æ‰“å°å€¼çš„ç±»å‹ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ï¼ˆchannelsã€functionsã€pointersã€slices å’Œ mapsï¼‰ï¼Œæ‰“å°ç±»å‹å’Œåå…­è¿›åˆ¶çš„å¼•ç”¨åœ°å€ã€‚è™½ç„¶è¿˜ä¸å¤Ÿç†æƒ³ï¼Œä½†æ˜¯ä¾ç„¶æ˜¯ä¸€ä¸ªé‡å¤§çš„è¿›æ­¥ï¼Œå¹¶ä¸” Kind åªå…³å¿ƒåº•å±‚è¡¨ç¤ºï¼Œ<code>format.Any</code> ä¹Ÿæ”¯æŒå…·åç±»å‹ã€‚ä¾‹å¦‚ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>var x int64 = 1
var d time.Duration = 1 * time.Nanosecond
fmt.Println(format.Any(x))                  // &quot;1&quot;
fmt.Println(format.Any(d))                  // &quot;1&quot;
fmt.Println(format.Any([]int64{x}))         // &quot;[]int64 0x8202b87b0&quot;
fmt.Println(format.Any([]time.Duration{d})) // &quot;[]time.Duration 0x8202b87e0&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/DailyNotes/assets/image-20240731112258817-B9d_TR8H.png" alt="image-20240731112258817" tabindex="0" loading="lazy"><figcaption>image-20240731112258817</figcaption></figure><h2 id="_12-3-display-ä¸€ä¸ªé€’å½’çš„å€¼æ‰“å°å™¨" tabindex="-1"><a class="header-anchor" href="#_12-3-display-ä¸€ä¸ªé€’å½’çš„å€¼æ‰“å°å™¨"><span>12.3. Displayï¼Œä¸€ä¸ªé€’å½’çš„å€¼æ‰“å°å™¨</span></a></h2><p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ”¹å–„èšåˆæ•°æ®ç±»å‹çš„æ˜¾ç¤ºã€‚æ„å»ºä¸€ä¸ªç”¨äºè°ƒè¯•ç”¨çš„Displayå‡½æ•°ï¼šç»™å®šä»»æ„ä¸€ä¸ªå¤æ‚ç±»å‹ xï¼Œæ‰“å°è¿™ä¸ªå€¼å¯¹åº”çš„å®Œæ•´ç»“æ„ï¼ŒåŒæ—¶æ ‡è®°æ¯ä¸ªå…ƒç´ çš„å‘ç°è·¯å¾„ã€‚</p><p>åº”è¯¥å°½é‡é¿å…åœ¨ä¸€ä¸ªåŒ…çš„APIä¸­æš´éœ²æ¶‰åŠåå°„çš„æ¥å£ã€‚æˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªæœªå¯¼å‡ºçš„displayå‡½æ•°ç”¨äºé€’å½’å¤„ç†å·¥ä½œï¼Œå¯¼å‡ºçš„æ˜¯Displayå‡½æ•°ï¼Œå®ƒåªæ˜¯displayå‡½æ•°ç®€å•çš„åŒ…è£…ä»¥æ¥å—<code>interface{}</code>ç±»å‹çš„å‚æ•°ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>func Display(name string, x interface{}) {
    fmt.Printf(&quot;Display %s (%T):\n&quot;, name, x)
    display(name, reflect.ValueOf(x))
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨displayå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å‰é¢å®šä¹‰çš„æ‰“å°åŸºç¡€ç±»å‹â€”â€”åŸºæœ¬ç±»å‹ã€å‡½æ•°å’Œchanç­‰â€”â€”å…ƒç´ å€¼çš„<code>formatAtom</code>å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šä½¿ç”¨<code>reflect.Value</code>çš„æ–¹æ³•æ¥é€’å½’æ˜¾ç¤ºå¤æ‚ç±»å‹çš„æ¯ä¸€ä¸ªæˆå‘˜ã€‚åœ¨é€’å½’ä¸‹é™è¿‡ç¨‹ä¸­ï¼Œpathå­—ç¬¦ä¸²ï¼Œä»æœ€å¼€å§‹ä¼ å…¥çš„èµ·å§‹å€¼ï¼ˆè¿™é‡Œæ˜¯â€œeâ€ï¼‰ï¼Œå°†é€æ­¥å¢é•¿æ¥è¡¨ç¤ºæ˜¯å¦‚ä½•è¾¾åˆ°å½“å‰å€¼ï¼ˆä¾‹å¦‚â€œ<code>e.args[0].value</code>â€ï¼‰çš„ã€‚</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">package</span> format

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;reflect&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Display</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> x <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Display %s (%T):\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
	<span class="token function">display</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">display</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">,</span> v reflect<span class="token punctuation">.</span>Value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">switch</span> v<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Invalid<span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s = invalid\n&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
	<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Slice<span class="token punctuation">,</span> reflect<span class="token punctuation">.</span>Array<span class="token punctuation">:</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			<span class="token function">display</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s[%d]&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Struct<span class="token punctuation">:</span>
		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
			fieldPath <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s.%s&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
			<span class="token function">display</span><span class="token punctuation">(</span>fieldPath<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Map<span class="token punctuation">:</span>
		<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> key <span class="token operator">:=</span> <span class="token keyword">range</span> v<span class="token punctuation">.</span><span class="token function">MapKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function">display</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s[%s]&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span>
				<span class="token function">formatAtom</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">MapIndex</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Ptr<span class="token punctuation">:</span>
		<span class="token keyword">if</span> v<span class="token punctuation">.</span><span class="token function">IsNil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s = nil\n&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token function">display</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;(*%s)&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Interface<span class="token punctuation">:</span>
		<span class="token keyword">if</span> v<span class="token punctuation">.</span><span class="token function">IsNil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s = nil\n&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s.type = %s\n&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token function">display</span><span class="token punctuation">(</span>path<span class="token operator">+</span><span class="token string">&quot;.value&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token comment">// basic types, channels, funcs</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s = %s\n&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token function">formatAtom</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®©æˆ‘ä»¬é’ˆå¯¹ä¸åŒç±»å‹åˆ†åˆ«è®¨è®ºã€‚</p><p><strong>Sliceå’Œæ•°ç»„ï¼š</strong> ä¸¤ç§çš„å¤„ç†é€»è¾‘æ˜¯ä¸€æ ·çš„ã€‚Lenæ–¹æ³•è¿”å›sliceæˆ–æ•°ç»„å€¼ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œ<code>Index(i)</code>è·å¾—ç´¢å¼•iå¯¹åº”çš„å…ƒç´ ï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª<code>reflect.Value</code>ï¼›å¦‚æœç´¢å¼•iè¶…å‡ºèŒƒå›´çš„è¯å°†å¯¼è‡´panicå¼‚å¸¸ï¼Œè¿™ä¸æ•°ç»„æˆ–sliceç±»å‹å†…å»ºçš„<code>len(a</code>)å’Œ<code>a[i]</code>æ“ä½œç±»ä¼¼ã€‚displayé’ˆå¯¹åºåˆ—ä¸­çš„æ¯ä¸ªå…ƒç´ é€’å½’è°ƒç”¨è‡ªèº«å¤„ç†ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨é€’å½’å¤„ç†æ—¶å‘pathé™„åŠ <code>[i]</code>æ¥è¡¨ç¤ºè®¿é—®è·¯å¾„ã€‚</p><p>è™½ç„¶<code>reflect.Value</code>ç±»å‹å¸¦æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œä½†æ˜¯åªæœ‰å°‘æ•°çš„æ–¹æ³•èƒ½å¯¹ä»»æ„å€¼éƒ½å®‰å…¨è°ƒç”¨ã€‚ä¾‹å¦‚ï¼ŒIndexæ–¹æ³•åªèƒ½å¯¹Sliceã€æ•°ç»„æˆ–å­—ç¬¦ä¸²ç±»å‹çš„å€¼è°ƒç”¨ï¼Œå¦‚æœå¯¹å…¶å®ƒç±»å‹è°ƒç”¨åˆ™ä¼šå¯¼è‡´panicå¼‚å¸¸ã€‚</p><p><strong>ç»“æ„ä½“ï¼š</strong> <code>NumField</code>æ–¹æ³•æŠ¥å‘Šç»“æ„ä½“ä¸­æˆå‘˜çš„æ•°é‡ï¼Œ<code>Field(i)</code>ä»¥<code>reflect.Value</code>ç±»å‹è¿”å›ç¬¬iä¸ªæˆå‘˜çš„å€¼ã€‚æˆå‘˜åˆ—è¡¨ä¹ŸåŒ…æ‹¬é€šè¿‡åŒ¿åå­—æ®µæå‡ä¸Šæ¥çš„æˆå‘˜ã€‚ä¸ºäº†åœ¨<code>path</code>æ·»åŠ <code>â€œ.fâ€</code>æ¥è¡¨ç¤ºæˆå‘˜è·¯å¾„ï¼Œæˆ‘ä»¬å¿…é¡»è·å¾—ç»“æ„ä½“å¯¹åº”çš„<code>reflect.Type</code>ç±»å‹ä¿¡æ¯ï¼Œç„¶åè®¿é—®ç»“æ„ä½“ç¬¬iä¸ªæˆå‘˜çš„åå­—ã€‚</p><p><strong>Maps:</strong> <code>MapKeys</code>æ–¹æ³•è¿”å›ä¸€ä¸ª<code>reflect.Value</code>ç±»å‹çš„sliceï¼Œæ¯ä¸€ä¸ªå…ƒç´ å¯¹åº”<code>map</code>çš„ä¸€ä¸ª<code>key</code>ã€‚å’Œå¾€å¸¸ä¸€æ ·ï¼Œéå†mapæ—¶é¡ºåºæ˜¯éšæœºçš„ã€‚<code>MapIndex(key)</code>è¿”å›<code>map</code>ä¸­<code>key</code>å¯¹åº”çš„<code>value</code>ã€‚æˆ‘ä»¬å‘<code>path</code>æ·»åŠ <code>[key]</code>æ¥è¡¨ç¤ºè®¿é—®è·¯å¾„ã€‚ï¼ˆæˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªæœªå®Œæˆçš„å·¥ä½œã€‚å…¶å®<code>map</code>çš„<code>key</code>çš„ç±»å‹å¹¶ä¸å±€é™äº<code>formatAtom</code>èƒ½å®Œç¾å¤„ç†çš„ç±»å‹ï¼›æ•°ç»„ã€ç»“æ„ä½“å’Œæ¥å£éƒ½å¯ä»¥ä½œä¸º<code>map</code>çš„<code>key</code>ã€‚é’ˆå¯¹è¿™ç§ç±»å‹ï¼Œå®Œå–„<code>key</code>çš„æ˜¾ç¤ºä¿¡æ¯æ˜¯ç»ƒä¹ 12.1çš„ä»»åŠ¡ã€‚ï¼‰</p><p><strong>æŒ‡é’ˆï¼š</strong><code> Elem</code>æ–¹æ³•è¿”å›æŒ‡é’ˆæŒ‡å‘çš„å˜é‡ï¼Œä¾ç„¶æ˜¯<code>reflect.Value</code>ç±»å‹ã€‚å³ä½¿æŒ‡é’ˆæ˜¯<code>nil</code>ï¼Œè¿™ä¸ªæ“ä½œä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æŒ‡é’ˆæ˜¯<code>Invalid</code>ç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨<code>IsNil</code>æ–¹æ³•æ¥æ˜¾å¼åœ°æµ‹è¯•ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ‰“å°æ›´åˆé€‚çš„ä¿¡æ¯ã€‚æˆ‘ä»¬åœ¨pathå‰é¢æ·»åŠ <code>*</code>ï¼Œå¹¶ç”¨æ‹¬å¼§åŒ…å«ä»¥é¿å…æ­§ä¹‰ã€‚</p><p><strong>æ¥å£ï¼š</strong> å†ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>IsNil</code>æ–¹æ³•æ¥æµ‹è¯•æ¥å£æ˜¯å¦æ˜¯nilï¼Œå¦‚æœä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨<code>v.Elem()</code>æ¥è·å–æ¥å£å¯¹åº”çš„åŠ¨æ€å€¼ï¼Œå¹¶ä¸”æ‰“å°å¯¹åº”çš„ç±»å‹å’Œå€¼ã€‚</p><p>ç°åœ¨æˆ‘ä»¬çš„Displayå‡½æ•°æ€»ç®—å®Œå·¥äº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„è¡¨ç°å§ã€‚ä¸‹é¢çš„Movieç±»å‹æ˜¯åœ¨4.5èŠ‚çš„ç”µå½±ç±»å‹ä¸Šæ¼”å˜æ¥çš„ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>type Movie struct {
    Title, Subtitle string
    Year            int
    Color           bool
    Actor           map[string]string
    Oscars          []string
    Sequel          *string
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®©æˆ‘ä»¬å£°æ˜ä¸€ä¸ªè¯¥ç±»å‹çš„å˜é‡ï¼Œç„¶åçœ‹çœ‹Displayå‡½æ•°å¦‚ä½•æ˜¾ç¤ºå®ƒï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>strangelove := Movie{
    Title:    &quot;Dr. Strangelove&quot;,
    Subtitle: &quot;How I Learned to Stop Worrying and Love the Bomb&quot;,
    Year:     1964,
    Color:    false,
    Actor: map[string]string{
        &quot;Dr. Strangelove&quot;:            &quot;Peter Sellers&quot;,
        &quot;Grp. Capt. Lionel Mandrake&quot;: &quot;Peter Sellers&quot;,
        &quot;Pres. Merkin Muffley&quot;:       &quot;Peter Sellers&quot;,
        &quot;Gen. Buck Turgidson&quot;:        &quot;George C. Scott&quot;,
        &quot;Brig. Gen. Jack D. Ripper&quot;:  &quot;Sterling Hayden&quot;,
        `Maj. T.J. &quot;King&quot; Kong`:      &quot;Slim Pickens&quot;,
    },

    Oscars: []string{
        &quot;Best Actor (Nomin.)&quot;,
        &quot;Best Adapted Screenplay (Nomin.)&quot;,
        &quot;Best Director (Nomin.)&quot;,
        &quot;Best Picture (Nomin.)&quot;,
    },
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/DailyNotes/assets/image-20240731135850186-7Xll9j1g.png" alt="image-20240731135850186" tabindex="0" loading="lazy"><figcaption>image-20240731135850186</figcaption></figure><p>è§‚å¯Ÿä¸‹é¢ä¸¤ä¸ªä¾‹å­çš„åŒºåˆ«ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>var i interface{} = 3

Display(&quot;i&quot;, i)
// Output:
// Display i (int):
// i = 3

Display(&quot;&amp;i&quot;, &amp;i)
// Output:
// Display &amp;i (*interface {}):
// (*&amp;i).type = int
// (*&amp;i).value = 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ<code>Display</code>å‡½æ•°è°ƒç”¨<code>reflect.ValueOf(i)</code>ï¼Œå®ƒè¿”å›ä¸€ä¸ª<code>Int</code>ç±»å‹çš„å€¼ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨12.2èŠ‚ä¸­æåˆ°çš„ï¼Œ<code>reflect.ValueOf</code>æ€»æ˜¯è¿”å›ä¸€ä¸ªå…·ä½“ç±»å‹çš„ <code>Value</code>ï¼Œå› ä¸ºå®ƒæ˜¯ä»ä¸€ä¸ªæ¥å£å€¼æå–çš„å†…å®¹ã€‚</p><p>åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œ<code>Display</code>å‡½æ•°è°ƒç”¨çš„æ˜¯<code>reflect.ValueOf(&amp;i)</code>ï¼Œå®ƒè¿”å›ä¸€ä¸ªæŒ‡å‘içš„æŒ‡é’ˆï¼Œå¯¹åº”<code>Ptr</code>ç±»å‹ã€‚åœ¨<code>switch</code>çš„<code>Ptr</code>åˆ†æ”¯ä¸­ï¼Œå¯¹è¿™ä¸ªå€¼è°ƒç”¨ <code>Elem</code> æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª<code>Value</code>æ¥è¡¨ç¤ºå˜é‡<code>i</code>æœ¬èº«ï¼Œå¯¹åº”<code>Interface</code>ç±»å‹ã€‚åƒè¿™æ ·ä¸€ä¸ªé—´æ¥è·å¾—çš„<code>Value</code>ï¼Œå¯èƒ½ä»£è¡¨ä»»æ„ç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬æ¥å£ç±»å‹ã€‚<code>display</code>å‡½æ•°é€’å½’è°ƒç”¨è‡ªèº«ï¼Œè¿™æ¬¡å®ƒåˆ†åˆ«æ‰“å°äº†è¿™ä¸ªæ¥å£çš„åŠ¨æ€ç±»å‹å’Œå€¼ã€‚</p><p><strong>ç»ƒä¹  12.1ï¼š</strong> æ‰©å±•Displayå‡½æ•°ï¼Œä½¿å®ƒå¯ä»¥æ˜¾ç¤ºåŒ…å«ä»¥ç»“æ„ä½“æˆ–æ•°ç»„ä½œä¸º<code>map</code>çš„<code>key</code>ç±»å‹çš„å€¼ã€‚</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Map<span class="token punctuation">:</span>
		<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> key <span class="token operator">:=</span> <span class="token keyword">range</span> v<span class="token punctuation">.</span><span class="token function">MapKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// XXX: å’±ä¹Ÿä¸é“å¯¹ä¸å¯¹</span>
			<span class="token keyword">if</span> key<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> reflect<span class="token punctuation">.</span>Struct <span class="token punctuation">{</span>
				<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
					fieldPath <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s.%s&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
					<span class="token function">display</span><span class="token punctuation">(</span>fieldPath<span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token function">display</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%s[%s]&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token function">formatAtom</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">MapIndex</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç»ƒä¹  12.2ï¼š</strong> å¢å¼ºdisplayå‡½æ•°çš„ç¨³å¥æ€§ï¼Œé€šè¿‡è®°å½•è¾¹ç•Œçš„æ­¥æ•°æ¥ç¡®ä¿åœ¨è¶…å‡ºä¸€å®šé™åˆ¶åæ”¾å¼ƒé€’å½’ã€‚ï¼ˆåœ¨13.3èŠ‚ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦ä¸€ç§æ¢æµ‹æ•°æ®ç»“æ„æ˜¯å¦å­˜åœ¨ç¯çš„æŠ€æœ¯ã€‚ï¼‰</p><h2 id="_12-4-ç¤ºä¾‹-ç¼–ç ä¸ºsè¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#_12-4-ç¤ºä¾‹-ç¼–ç ä¸ºsè¡¨è¾¾å¼"><span>12.4. ç¤ºä¾‹: ç¼–ç ä¸ºSè¡¨è¾¾å¼</span></a></h2><p>è¿™èŠ‚å…ˆä¸çœ‹äº†ï¼Œä¼¼ä¹æ²¡å•¥æ„æ€</p><h2 id="_12-5-é€šè¿‡reflect-valueä¿®æ”¹å€¼" tabindex="-1"><a class="header-anchor" href="#_12-5-é€šè¿‡reflect-valueä¿®æ”¹å€¼"><span>12.5. é€šè¿‡reflect.Valueä¿®æ”¹å€¼</span></a></h2><p>å›æƒ³ä¸€ä¸‹ï¼ŒGoè¯­è¨€ä¸­ç±»ä¼¼<code>x</code>ã€<code>x.f[1]</code>å’Œ<code>*p</code>å½¢å¼çš„è¡¨è¾¾å¼éƒ½å¯ä»¥è¡¨ç¤ºå˜é‡ï¼Œä½†æ˜¯å…¶å®ƒå¦‚<code>x + 1</code>å’Œ<code>f(2)</code>åˆ™ä¸æ˜¯å˜é‡ã€‚ä¸€ä¸ªå˜é‡å°±æ˜¯ä¸€ä¸ªå¯å¯»å€çš„å†…å­˜ç©ºé—´ï¼Œé‡Œé¢å­˜å‚¨äº†ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”å­˜å‚¨çš„å€¼å¯ä»¥é€šè¿‡å†…å­˜åœ°å€æ¥æ›´æ–°ã€‚</p><p>å¯¹äº<code>reflect.Values</code>ä¹Ÿæœ‰ç±»ä¼¼çš„åŒºåˆ«ã€‚æœ‰ä¸€äº›<code>reflect.Values</code>æ˜¯å¯å–åœ°å€çš„ï¼›å…¶å®ƒä¸€äº›åˆ™ä¸å¯ä»¥ã€‚è€ƒè™‘ä»¥ä¸‹çš„å£°æ˜è¯­å¥ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>x := 2                   // value   type    variable?
a := reflect.ValueOf(2)  // 2       int     no
b := reflect.ValueOf(x)  // 2       int     no
c := reflect.ValueOf(&amp;x) // &amp;x      *int    no
d := c.Elem()            // 2       int     yes (x)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶ä¸­<code>a</code>å¯¹åº”çš„å˜é‡ä¸å¯å–åœ°å€ã€‚å› ä¸ºaä¸­çš„å€¼ä»…ä»…æ˜¯æ•´æ•°2çš„æ‹·è´å‰¯æœ¬ã€‚<code>b</code>ä¸­çš„å€¼ä¹ŸåŒæ ·ä¸å¯å–åœ°å€ã€‚<code>c</code>ä¸­çš„å€¼è¿˜æ˜¯ä¸å¯å–åœ°å€ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæŒ‡é’ˆ<code>&amp;x</code>çš„æ‹·è´ã€‚å®é™…ä¸Šï¼Œæ‰€æœ‰é€šè¿‡<code>reflect.ValueOf(x)</code>è¿”å›çš„<code>reflect.Value</code>éƒ½æ˜¯ä¸å¯å–åœ°å€çš„ã€‚ä½†æ˜¯å¯¹äº<code>d</code>ï¼Œå®ƒæ˜¯<code>c</code>çš„è§£å¼•ç”¨æ–¹å¼ç”Ÿæˆçš„ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå˜é‡ï¼Œå› æ­¤æ˜¯å¯å–åœ°å€çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>reflect.ValueOf(&amp;x).Elem()</code>ï¼Œæ¥è·å–ä»»æ„å˜é‡<code>x</code>å¯¹åº”çš„å¯å–åœ°å€çš„<code>Value</code>ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>reflect.Value</code>çš„<code>CanAddr</code>æ–¹æ³•æ¥åˆ¤æ–­å…¶æ˜¯å¦å¯ä»¥è¢«å–åœ°å€ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>fmt.Println(a.CanAddr()) // &quot;false&quot;
fmt.Println(b.CanAddr()) // &quot;false&quot;
fmt.Println(c.CanAddr()) // &quot;false&quot;
fmt.Println(d.CanAddr()) // &quot;true&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯å½“æˆ‘ä»¬é€šè¿‡æŒ‡é’ˆé—´æ¥åœ°è·å–çš„<code>reflect.Value</code>éƒ½æ˜¯å¯å–åœ°å€çš„ï¼Œå³ä½¿å¼€å§‹çš„æ˜¯ä¸€ä¸ªä¸å¯å–åœ°å€çš„<code>Value</code>ã€‚åœ¨åå°„æœºåˆ¶ä¸­ï¼Œæ‰€æœ‰å…³äºæ˜¯å¦æ”¯æŒå–åœ°å€çš„è§„åˆ™éƒ½æ˜¯ç±»ä¼¼çš„ã€‚ä»¥æ­¤ç±»æ¨ï¼Œ<code>reflect.ValueOf(e).Index(i)</code>å¯¹åº”çš„å€¼ä¹Ÿæ˜¯å¯å–åœ°å€çš„ï¼Œå³ä½¿åŸå§‹çš„<code>reflect.ValueOf(e)</code>ä¸æ”¯æŒä¹Ÿæ²¡æœ‰å…³ç³»ã€‚</p><p>è¦ä»å˜é‡å¯¹åº”çš„å¯å–åœ°å€çš„<code>reflect.Value</code>æ¥è®¿é—®å˜é‡éœ€è¦ä¸‰ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€æ­¥æ˜¯è°ƒç”¨<code>Addr()</code>æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ª<code>Value</code>ï¼Œé‡Œé¢ä¿å­˜äº†æŒ‡å‘å˜é‡çš„æŒ‡é’ˆã€‚ç„¶åæ˜¯åœ¨<code>Value</code>ä¸Šè°ƒç”¨<code>Interface()</code>æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¿”å›ä¸€ä¸ª<code>interface{}</code>ï¼Œé‡Œé¢åŒ…å«æŒ‡å‘å˜é‡çš„æŒ‡é’ˆã€‚æœ€åï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“å˜é‡çš„ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹çš„æ–­è¨€æœºåˆ¶å°†å¾—åˆ°çš„<code>interface{}</code>ç±»å‹çš„æ¥å£å¼ºåˆ¶è½¬ä¸ºæ™®é€šçš„ç±»å‹æŒ‡é’ˆã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ™®é€šæŒ‡é’ˆæ¥æ›´æ–°å˜é‡äº†ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>x := 2
d := reflect.ValueOf(&amp;x).Elem()   // d refers to the variable x
px := d.Addr().Interface().(*int) // px := &amp;x
*px = 3                           // x = 3
fmt.Println(x)                    // &quot;3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ–è€…ï¼Œä¸ä½¿ç”¨æŒ‡é’ˆï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨å¯å–åœ°å€çš„<code>reflect.Value</code>çš„<code>reflect.Value.Set</code>æ–¹æ³•æ¥æ›´æ–°å¯¹åº”çš„å€¼ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>d.Set(reflect.ValueOf(4))
fmt.Println(x) // &quot;4&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Set</code>æ–¹æ³•å°†åœ¨è¿è¡Œæ—¶æ‰§è¡Œå’Œç¼–è¯‘æ—¶è¿›è¡Œç±»ä¼¼çš„å¯èµ‹å€¼æ€§çº¦æŸçš„æ£€æŸ¥ã€‚ä»¥ä¸Šä»£ç ï¼Œå˜é‡å’Œå€¼éƒ½æ˜¯intç±»å‹ï¼Œä½†æ˜¯å¦‚æœå˜é‡æ˜¯int64ç±»å‹ï¼Œé‚£ä¹ˆç¨‹åºå°†æŠ›å‡ºä¸€ä¸ªpanicå¼‚å¸¸ï¼Œæ‰€ä»¥å…³é”®é—®é¢˜æ˜¯è¦ç¡®ä¿æ”¹ç±»å‹çš„å˜é‡å¯ä»¥æ¥å—å¯¹åº”çš„å€¼ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>d.Set(reflect.ValueOf(int64(5))) // panic: int64 is not assignable to int
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åŒæ ·ï¼Œå¯¹ä¸€ä¸ªä¸å¯å–åœ°å€çš„<code>reflect.Value</code>è°ƒç”¨Setæ–¹æ³•ä¹Ÿä¼šå¯¼è‡´panicå¼‚å¸¸ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>x := 2
b := reflect.ValueOf(x)
b.Set(reflect.ValueOf(3)) // panic: Set using unaddressable value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæœ‰å¾ˆå¤šç”¨äºåŸºæœ¬æ•°æ®ç±»å‹çš„Setæ–¹æ³•ï¼š<code>SetInt</code>ã€<code>SetUint</code>ã€<code>SetString</code>å’Œ<code>SetFloat</code>ç­‰ã€‚</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>d := reflect.ValueOf(&amp;x).Elem()
d.SetInt(3)
fmt.Println(x) // &quot;3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»æŸç§ç¨‹åº¦ä¸Šè¯´ï¼Œè¿™äº›Setæ–¹æ³•æ€»æ˜¯å°½å¯èƒ½åœ°å®Œæˆä»»åŠ¡ã€‚ä»¥<code>SetInt</code>ä¸ºä¾‹ï¼Œåªè¦å˜é‡æ˜¯æŸç§ç±»å‹çš„æœ‰ç¬¦å·æ•´æ•°å°±å¯ä»¥å·¥ä½œï¼Œå³ä½¿æ˜¯ä¸€äº›å‘½åçš„ç±»å‹ã€ç”šè‡³åªè¦åº•å±‚æ•°æ®ç±»å‹æ˜¯æœ‰ç¬¦å·æ•´æ•°å°±å¯ä»¥ï¼Œè€Œä¸”å¦‚æœå¯¹äºå˜é‡ç±»å‹å€¼å¤ªå¤§çš„è¯ä¼šè¢«è‡ªåŠ¨æˆªæ–­ã€‚ä½†éœ€è¦è°¨æ…çš„æ˜¯ï¼šå¯¹äºä¸€ä¸ªå¼•ç”¨<code>interface{}</code>ç±»å‹çš„<code>reflect.Value</code>è°ƒç”¨<code>SetInt</code>ä¼šå¯¼è‡´panicå¼‚å¸¸ï¼Œå³ä½¿é‚£ä¸ª<code>interface{}</code>å˜é‡å¯¹äºæ•´æ•°ç±»å‹ä¹Ÿä¸è¡Œã€‚</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>x := 1
rx := reflect.ValueOf(&amp;x).Elem()
rx.SetInt(2)                     // OK, x = 2
rx.Set(reflect.ValueOf(3))       // OK, x = 3
rx.SetString(&quot;hello&quot;)            // panic: string is not assignable to int
rx.Set(reflect.ValueOf(&quot;hello&quot;)) // panic: string is not assignable to int

var y interface{}
ry := reflect.ValueOf(&amp;y).Elem()
ry.SetInt(2)                     // panic: SetInt called on interface Value
ry.Set(reflect.ValueOf(3))       // OK, y = int(3)
ry.SetString(&quot;hello&quot;)            // panic: SetString called on interface Value
ry.Set(reflect.ValueOf(&quot;hello&quot;)) // OK, y = &quot;hello&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬ç”¨<code>Display</code>æ˜¾ç¤º<code>os.Stdout</code>ç»“æ„æ—¶ï¼Œæˆ‘ä»¬å‘ç°åå°„å¯ä»¥è¶Šè¿‡Goè¯­è¨€çš„å¯¼å‡ºè§„åˆ™çš„é™åˆ¶è¯»å–ç»“æ„ä½“ä¸­æœªå¯¼å‡ºçš„æˆå‘˜ï¼Œæ¯”å¦‚åœ¨ç±»Unixç³»ç»Ÿä¸Š<code>os.File</code>ç»“æ„ä½“ä¸­çš„<code>fd int</code>æˆå‘˜ã€‚ç„¶è€Œï¼Œåˆ©ç”¨åå°„æœºåˆ¶å¹¶ä¸èƒ½ä¿®æ”¹è¿™äº›æœªå¯¼å‡ºçš„æˆå‘˜ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>stdout := reflect.ValueOf(os.Stdout).Elem() // *os.Stdout, an os.File var
fmt.Println(stdout.Type())                  // &quot;os.File&quot;
fd := stdout.FieldByName(&quot;fd&quot;)
fmt.Println(fd.Int()) // &quot;1&quot;
fd.SetInt(2)          // panic: unexported field
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸€ä¸ªå¯å–åœ°å€çš„<code>reflect.Value</code>ä¼šè®°å½•ä¸€ä¸ªç»“æ„ä½“æˆå‘˜æ˜¯å¦æ˜¯æœªå¯¼å‡ºæˆå‘˜ï¼Œå¦‚æœæ˜¯çš„è¯åˆ™æ‹’ç»ä¿®æ”¹æ“ä½œã€‚å› æ­¤ï¼Œ<code>CanAddr</code>æ–¹æ³•å¹¶ä¸èƒ½æ­£ç¡®åæ˜ ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚</p><p>ç›¸å…³çš„æ–¹æ³•<code>CanSet</code>æ˜¯ç”¨äºæ£€æŸ¥å¯¹åº”çš„<code>reflect.Value</code>æ˜¯å¦æ˜¯å¯å–åœ°å€å¹¶å¯è¢«ä¿®æ”¹çš„ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>fmt.Println(fd.CanAddr(), fd.CanSet()) // &quot;true false&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>å¯å–åœ°å€ä¸ä¸€å®šèƒ½è¢«ä¿®æ”¹ï¼Œèƒ½è¢«ä¿®æ”¹ä¸€å®šå¯å–åœ°å€</p></blockquote><h2 id="_12-7-è·å–ç»“æ„ä½“å­—æ®µæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_12-7-è·å–ç»“æ„ä½“å­—æ®µæ ‡ç­¾"><span>12.7. è·å–ç»“æ„ä½“å­—æ®µæ ‡ç­¾</span></a></h2><p>å¯¹äºä¸€ä¸ªwebæœåŠ¡ï¼Œå¤§éƒ¨åˆ†HTTPå¤„ç†å‡½æ•°è¦åšçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯å±•å¼€è¯·æ±‚ä¸­çš„å‚æ•°åˆ°æœ¬åœ°å˜é‡ä¸­ã€‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå«<code>params.Unpack</code>ï¼Œé€šè¿‡ä½¿ç”¨ç»“æ„ä½“æˆå‘˜æ ‡ç­¾æœºåˆ¶æ¥è®©HTTPå¤„ç†å‡½æ•°è§£æè¯·æ±‚å‚æ•°æ›´æ–¹ä¾¿ã€‚</p><p>ä¸‹é¢çš„searchå‡½æ•°æ˜¯ä¸€ä¸ªHTTPè¯·æ±‚å¤„ç†å‡½æ•°ã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªåŒ¿åç»“æ„ä½“ç±»å‹çš„å˜é‡ï¼Œç”¨ç»“æ„ä½“çš„æ¯ä¸ªæˆå‘˜è¡¨ç¤ºHTTPè¯·æ±‚çš„å‚æ•°ã€‚å…¶ä¸­ç»“æ„ä½“æˆå‘˜æ ‡ç­¾æŒ‡æ˜äº†å¯¹äºè¯·æ±‚å‚æ•°çš„åå­—ï¼Œä¸ºäº†å‡å°‘URLçš„é•¿åº¦è¿™äº›å‚æ•°åé€šå¸¸éƒ½æ˜¯ç¥ç§˜çš„ç¼©ç•¥è¯ã€‚Unpackå°†è¯·æ±‚å‚æ•°å¡«å……åˆ°åˆé€‚çš„ç»“æ„ä½“æˆå‘˜ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°é€šè¿‡åˆé€‚çš„ç±»å‹ç±»æ¥è®¿é—®è¿™äº›å‚æ•°ã€‚</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>// search implements the /search URL endpoint.
func search(resp http.ResponseWriter, req *http.Request) {
    var data struct {
        Labels     []string `http:&quot;l&quot;`
        MaxResults int      `http:&quot;max&quot;`
        Exact      bool     `http:&quot;x&quot;`
    }
    data.MaxResults = 10 // set default
    if err := params.Unpack(req, &amp;data); err != nil {
        http.Error(resp, err.Error(), http.StatusBadRequest) // 400
        return
    }

    // ...rest of handler...
    fmt.Fprintf(resp, &quot;Search: %+v\n&quot;, data)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸‹é¢çš„Unpackå‡½æ•°ä¸»è¦å®Œæˆä¸‰ä»¶äº‹æƒ…ã€‚ç¬¬ä¸€ï¼Œå®ƒè°ƒç”¨<code>req.ParseForm()</code>æ¥è§£æHTTPè¯·æ±‚ã€‚ç„¶åï¼Œ<code>req.Form</code>å°†åŒ…å«æ‰€æœ‰çš„è¯·æ±‚å‚æ•°ï¼Œä¸ç®¡HTTPå®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯GETè¿˜æ˜¯POSTè¯·æ±‚æ–¹æ³•ã€‚</p><p>ä¸‹ä¸€æ­¥ï¼ŒUnpackå‡½æ•°å°†æ„å»ºæ¯ä¸ªç»“æ„ä½“æˆå‘˜æœ‰æ•ˆå‚æ•°åå­—åˆ°æˆå‘˜å˜é‡çš„æ˜ å°„ã€‚å¦‚æœç»“æ„ä½“æˆå‘˜æœ‰æˆå‘˜æ ‡ç­¾çš„è¯ï¼Œæœ‰æ•ˆå‚æ•°åå­—å¯èƒ½å’Œå®é™…çš„æˆå‘˜åå­—ä¸ç›¸åŒã€‚<code>reflect.Type</code>çš„<code>Field</code>æ–¹æ³•å°†è¿”å›ä¸€ä¸ª<code>reflect.StructField</code>ï¼Œé‡Œé¢å«æœ‰æ¯ä¸ªæˆå‘˜çš„åå­—ã€ç±»å‹å’Œå¯é€‰çš„æˆå‘˜æ ‡ç­¾ç­‰ä¿¡æ¯ã€‚å…¶ä¸­æˆå‘˜æ ‡ç­¾ä¿¡æ¯å¯¹åº”<code>reflect.StructTag</code>ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æä¾›äº†Getæ–¹æ³•ç”¨äºè§£æå’Œæ ¹æ®ç‰¹å®škeyæå–çš„å­ä¸²ï¼Œä¾‹å¦‚è¿™é‡Œçš„http:&quot;...&quot;å½¢å¼çš„å­ä¸²ã€‚</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token comment">// Unpack populates the fields of the struct pointed to by ptr</span>
<span class="token comment">// from the HTTP request parameters in req.</span>
<span class="token keyword">func</span> <span class="token function">Unpack</span><span class="token punctuation">(</span>req <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">,</span> ptr <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> err <span class="token operator">:=</span> req<span class="token punctuation">.</span><span class="token function">ParseForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>

    <span class="token comment">// Build map of fields keyed by effective name.</span>
    fields <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>reflect<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>
    v <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>ptr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// the struct variable</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        fieldInfo <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// a reflect.StructField</span>
        tag <span class="token operator">:=</span> fieldInfo<span class="token punctuation">.</span>Tag           <span class="token comment">// a reflect.StructTag</span>
        name <span class="token operator">:=</span> tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">{</span>
            name <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span>fieldInfo<span class="token punctuation">.</span>Name<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        fields<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Update struct field for each parameter in the request.</span>
    <span class="token keyword">for</span> name<span class="token punctuation">,</span> values <span class="token operator">:=</span> <span class="token keyword">range</span> req<span class="token punctuation">.</span>Form <span class="token punctuation">{</span>
        f <span class="token operator">:=</span> fields<span class="token punctuation">[</span>name<span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token operator">!</span>f<span class="token punctuation">.</span><span class="token function">IsValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span> <span class="token comment">// ignore unrecognized HTTP parameters</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> values <span class="token punctuation">{</span>
            <span class="token keyword">if</span> f<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> reflect<span class="token punctuation">.</span>Slice <span class="token punctuation">{</span>
                elem <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">populate</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %v&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
                f<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>reflect<span class="token punctuation">.</span><span class="token function">Append</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">populate</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;%s: %v&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼ŒUnpackéå†HTTPè¯·æ±‚çš„name/valuå‚æ•°é”®å€¼å¯¹ï¼Œæ›´æ–°ç›¸åº”çš„ç»“æ„ä½“æˆå‘˜ã€‚ã€‚å¦‚æœåŒä¸€ä¸ªåå­—çš„å‚æ•°å¯èƒ½å‡ºç°å¤šæ¬¡ï¼Œå¹¶ä¸”å¯¹åº”çš„ç»“æ„ä½“æˆå‘˜æ˜¯ä¸€ä¸ªsliceï¼Œé‚£ä¹ˆå°±å°†æ‰€æœ‰çš„å‚æ•°æ·»åŠ åˆ°sliceä¸­ã€‚å¯¹åº”çš„æˆå‘˜å€¼å°†è¢«è¦†ç›–ï¼Œåªæœ‰æœ€åä¸€æ¬¡å‡ºç°çš„å‚æ•°å€¼æ‰æ˜¯èµ·ä½œç”¨çš„ã€‚</p><p>populateå‡½æ•°ç”¨è¯·æ±‚çš„å­—ç¬¦ä¸²ç±»å‹å‚æ•°å€¼æ¥å¡«å……å•ä¸€çš„æˆå‘˜vï¼ˆæˆ–è€…æ˜¯sliceç±»å‹æˆå‘˜ä¸­çš„å•ä¸€çš„å…ƒç´ ï¼‰ã€‚</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">populate</span><span class="token punctuation">(</span>v reflect<span class="token punctuation">.</span>Value<span class="token punctuation">,</span> value <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> v<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> reflect<span class="token punctuation">.</span>String<span class="token punctuation">:</span>
        v<span class="token punctuation">.</span><span class="token function">SetString</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>

    <span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Int<span class="token punctuation">:</span>
        i<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> err
        <span class="token punctuation">}</span>
        v<span class="token punctuation">.</span><span class="token function">SetInt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

    <span class="token keyword">case</span> reflect<span class="token punctuation">.</span>Bool<span class="token punctuation">:</span>
        b<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseBool</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> err
        <span class="token punctuation">}</span>
        v<span class="token punctuation">.</span><span class="token function">SetBool</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>

    <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;unsupported kind %s&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/DailyNotes/assets/image-20240731161711817-J-MrnIVa.png" alt="image-20240731161711817" tabindex="0" loading="lazy"><figcaption>image-20240731161711817</figcaption></figure><h2 id="_12-8-æ˜¾ç¤ºä¸€ä¸ªç±»å‹çš„æ–¹æ³•é›†" tabindex="-1"><a class="header-anchor" href="#_12-8-æ˜¾ç¤ºä¸€ä¸ªç±»å‹çš„æ–¹æ³•é›†"><span>12.8. æ˜¾ç¤ºä¸€ä¸ªç±»å‹çš„æ–¹æ³•é›†</span></a></h2><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>// Print prints the method set of the value x.
func Print(x interface{}) {
    v := reflect.ValueOf(x)
    t := v.Type()
    fmt.Printf(&quot;type %s\n&quot;, t)

    for i := 0; i &lt; v.NumMethod(); i++ {
        methType := v.Method(i).Type()
        fmt.Printf(&quot;func (%s) %s%s\n&quot;, t, t.Method(i).Name,
            strings.TrimPrefix(methType.String(), &quot;func&quot;))
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>reflect.Type</code>å’Œ<code>reflect.Value</code>éƒ½æä¾›äº†ä¸€ä¸ªMethodæ–¹æ³•ã€‚æ¯æ¬¡<code>t.Method(i)</code>è°ƒç”¨å°†ä¸€ä¸ª<code>reflect.Method</code>çš„å®ä¾‹ï¼Œå¯¹åº”ä¸€ä¸ªç”¨äºæè¿°ä¸€ä¸ªæ–¹æ³•çš„åç§°å’Œç±»å‹çš„ç»“æ„ä½“ã€‚æ¯æ¬¡<code>v.Method(i)</code>æ–¹æ³•è°ƒç”¨éƒ½è¿”å›ä¸€ä¸ª<code>reflect.Value</code>ä»¥è¡¨ç¤ºå¯¹åº”çš„å€¼ï¼ˆÂ§6.4ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ–¹æ³•æ˜¯ç»‘åˆ°å®ƒçš„æ¥æ”¶è€…çš„ã€‚ä½¿ç”¨<code>reflect.Value.Call</code>æ–¹æ³•ï¼ˆæˆ‘ä»¬è¿™é‡Œæ²¡æœ‰æ¼”ç¤ºï¼‰ï¼Œå°†å¯ä»¥è°ƒç”¨ä¸€ä¸ª<code>Func</code>ç±»å‹çš„Valueï¼Œä½†æ˜¯è¿™ä¸ªä¾‹å­ä¸­åªç”¨åˆ°äº†å®ƒçš„ç±»å‹ã€‚</p><p>è¿™æ˜¯å±äº<code>time.Duration</code>å’Œ<code>*strings.Replacer</code>ä¸¤ä¸ªç±»å‹çš„æ–¹æ³•ï¼š</p><div class="language-Go line-numbers-mode" data-ext="Go" data-title="Go"><pre class="language-Go"><code>methods.Print(time.Hour)
// Output:
// type time.Duration
// func (time.Duration) Hours() float64
// func (time.Duration) Minutes() float64
// func (time.Duration) Nanoseconds() int64
// func (time.Duration) Seconds() float64
// func (time.Duration) String() string

methods.Print(new(strings.Replacer))
// Output:
// type *strings.Replacer
// func (*strings.Replacer) Replace(string) string
// func (*strings.Replacer) WriteString(io.Writer, string) (int, error)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="/DailyNotes/assets/image-20240731164211191-9wCy7Y82.png" alt="image-20240731164211191" tabindex="0" loading="lazy"><figcaption>image-20240731164211191</figcaption></figure></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/echo0d/DailyNotes/edit/main/src/develop/Go/gopl/ch12.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: echo0d@163.com">echo0d</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/DailyNotes/develop/Go/gopl/ch11.html" aria-label="11. æµ‹è¯•"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->11. æµ‹è¯•</div></a><!----></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">å¬å›ä¸€å¸­è¯ï¼Œå¦‚å¬ä¸€å¸­è¯</div><div class="vp-copyright">Copyright Â© 2024 echo0d </div></footer></div><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/DailyNotes/assets/app-DtCYmMlo.js" defer></script>
  </body>
</html>
