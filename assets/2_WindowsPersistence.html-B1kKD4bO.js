import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,b as n,o as t}from"./app-Btk8SoLK.js";const o={};function r(i,a){return t(),e("div",null,a[0]||(a[0]=[n(`<h1 id="_2-windows权限维持" tabindex="-1"><a class="header-anchor" href="#_2-windows权限维持"><span>2. Windows权限维持</span></a></h1><h3 id="权限维持-sc-create-服务" tabindex="-1"><a class="header-anchor" href="#权限维持-sc-create-服务"><span>权限维持--sc create 服务</span></a></h3><p>有些程序由于代码格式的原因，无法注册为服务，在某些版本的windows上（win10试过不可以）可以尝试一下</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>sc Create 服务名称 <span class="token assign-left variable">binPath</span><span class="token operator">=</span> <span class="token string">&quot;cmd /c start 路径&quot;</span> <span class="token assign-left variable">type</span><span class="token operator">=</span> own <span class="token assign-left variable">type</span><span class="token operator">=</span> interact <span class="token assign-left variable">start</span><span class="token operator">=</span> auto
sc Create 服务名称 <span class="token assign-left variable">binPath</span><span class="token operator">=</span> <span class="token string">&quot;Rundll32.exe DLL路径 执行函数 参数&quot;</span> <span class="token assign-left variable">type</span><span class="token operator">=</span> own <span class="token assign-left variable">type</span><span class="token operator">=</span> interact <span class="token assign-left variable">start</span><span class="token operator">=</span> auto
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="后台运行-waitfor-命令" tabindex="-1"><a class="header-anchor" href="#后台运行-waitfor-命令"><span>后台运行 waitfor 命令</span></a></h3><p>waitfor 命令是 Windows 系统中的一个命令行工具，用于等待指定的时间或等待特定事件发生。然而，<code>waitfor</code> 命令本身并不支持后台运行，它会阻塞当前命令行窗口，直到满足指定的条件。 使用启动器（Wrapper）脚本： 创建一个批处理脚本（例如 <code>waitfor_background.bat</code>），在其中调用 <code>waitfor</code> 命令，然后使用 <code>start</code> 命令来在后台运行该脚本。示例：</p><div class="language-bat line-numbers-mode" data-ext="bat" data-title="bat"><pre class="language-bat"><code>@echo off
start &quot;&quot; cmd /c waitfor 某个条件

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这将在新窗口中启动命令行并在后台运行 <code>waitfor</code> 命令。</p>`,8)]))}const p=s(o,[["render",r],["__file","2_WindowsPersistence.html.vue"]]),d=JSON.parse('{"path":"/CyberSecurity/RedTeam/3-Persistence/2_WindowsPersistence.html","title":"2. Windows权限维持","lang":"zh-CN","frontmatter":{},"headers":[{"level":3,"title":"权限维持--sc create 服务","slug":"权限维持-sc-create-服务","link":"#权限维持-sc-create-服务","children":[]},{"level":3,"title":"后台运行 waitfor 命令","slug":"后台运行-waitfor-命令","link":"#后台运行-waitfor-命令","children":[]}],"git":{"createdTime":1731665131000,"updatedTime":1731665131000,"contributors":[{"name":"echo0d","email":"echo0d@163.com","commits":1}]},"readingTime":{"minutes":0.83,"words":250},"filePathRelative":"CyberSecurity/RedTeam/3-Persistence/2_WindowsPersistence.md","localizedDate":"2024年11月15日","excerpt":"\\n<h3>权限维持--sc create 服务</h3>\\n<p>有些程序由于代码格式的原因，无法注册为服务，在某些版本的windows上（win10试过不可以）可以尝试一下</p>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code>sc Create 服务名称 <span class=\\"token assign-left variable\\">binPath</span><span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"cmd /c start 路径\\"</span> <span class=\\"token assign-left variable\\">type</span><span class=\\"token operator\\">=</span> own <span class=\\"token assign-left variable\\">type</span><span class=\\"token operator\\">=</span> interact <span class=\\"token assign-left variable\\">start</span><span class=\\"token operator\\">=</span> auto\\nsc Create 服务名称 <span class=\\"token assign-left variable\\">binPath</span><span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"Rundll32.exe DLL路径 执行函数 参数\\"</span> <span class=\\"token assign-left variable\\">type</span><span class=\\"token operator\\">=</span> own <span class=\\"token assign-left variable\\">type</span><span class=\\"token operator\\">=</span> interact <span class=\\"token assign-left variable\\">start</span><span class=\\"token operator\\">=</span> auto\\n</code></pre></div>"}');export{p as comp,d as data};
