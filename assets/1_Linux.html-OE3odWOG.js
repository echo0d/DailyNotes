import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r,o as a,c as n,a as t,b as d,d as l,e as s}from"./app-mL-rp2OL.js";const o="/DailyNotes/assets/image-20240131161104043-O8Wg0i7O.png",c="/DailyNotes/assets/image-20240131173738484-_XQixvdM.png",h="/DailyNotes/assets/image-20240131174339576-TT0i9vP4.png",u="/DailyNotes/assets/image-20240131175420177-lBLSy7zZ.png",g={},p=t("h1",{id:"_1-linux权限提升",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#_1-linux权限提升","aria-hidden":"true"},"#"),d(" 1-Linux权限提升")],-1),m={href:"https://zhuanlan.zhihu.com/p/428433013?utm_id=0",target:"_blank",rel:"noopener noreferrer"},b=s(`<h2 id="_1-linux中的用户和组" tabindex="-1"><a class="header-anchor" href="#_1-linux中的用户和组" aria-hidden="true">#</a> 1. Linux中的用户和组</h2><h3 id="_1-1-用户和组概念" tabindex="-1"><a class="header-anchor" href="#_1-1-用户和组概念" aria-hidden="true">#</a> 1.1 用户和组概念</h3><ul><li>超级管理员（root）</li><li>系统用户</li><li>普通用户</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@localhost ~]# id root
uid=0(root) gid=0(root) groups=0(root)
[root@localhost ~]#
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每个用户被分配一个唯一的用户标识符（UID），用于标识和管理用户。</p><table><thead><tr><th>用户分类</th><th>UID</th></tr></thead><tbody><tr><td>超级管理员</td><td>0</td></tr><tr><td>系统用户</td><td>1-499（CentOS6及以前），1-999（CentOS7及以后）</td></tr><tr><td>普通用户</td><td>&gt;=500（CentOS6及以前），&gt;=1000（CentOS7及以后）</td></tr></tbody></table><p>GID（组标识符）用于标识和管理用户所属的组。每个用户可以属于一个或多个组，而每个组也有一个唯一的GID。</p><table><thead><tr><th>用户组</th><th>GID</th></tr></thead><tbody><tr><td>root组</td><td>0</td></tr><tr><td>系统组</td><td>1-999</td></tr><tr><td>普通组</td><td>&gt;=1000</td></tr></tbody></table><p>先有组，再有用户：</p><ul><li>用户必须有且只有一个基本组。</li><li>当创建一个用户时，如果没有指定基本组，会先创建一个与该用户同名的组，再创建用户。</li><li>一个用户可以有多个附加组。</li><li>基本组内没有任何用户，才能被删除。</li></ul><h3 id="_1-2-相关文件" tabindex="-1"><a class="header-anchor" href="#_1-2-相关文件" aria-hidden="true">#</a> 1.2 相关文件</h3><p><code>/etc/passwd</code> 文件中存储了所有用户信息。</p><figure><img src="`+o+`" alt="image-20240131161104043" tabindex="0" loading="lazy"><figcaption>image-20240131161104043</figcaption></figure><p>该文件每一行是一个用户信息，并且以<code>:</code> 为分隔符，一共7 段内容。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>root:x:0:0:root:/root:/bin/bash
[--] - - - [--] [---] [--------]
 |   | | |   |    |        |
 |   | | |   |    |        +-&gt; 7. Login shell
 |   | | |   |     +---------&gt; 6. Home directory
 |   | | |   +---------------&gt; 5. GECOS
 |   | | +-------------------&gt; 4. GID
 |   | +---------------------&gt; 3. UID
 |   +-----------------------&gt; 2. Password
 +---------------------------&gt; 1. Username
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>字段序号</th><th>示例</th><th>解释</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>root</td><td>用户名</td><td></td></tr><tr><td>2</td><td>x</td><td>密码占位符</td><td>用户的密码 x 代表有密码 无内容，用户登录系统无需密码</td></tr><tr><td>3</td><td>0</td><td>UID</td><td>当前用户的身份标识 0 就是超级管理员</td></tr><tr><td>4</td><td>0</td><td>GID</td><td>当前用户的基本组ID</td></tr><tr><td>5</td><td>root</td><td>用户的身份信息 大名</td><td>现已废弃</td></tr><tr><td>6</td><td>/root</td><td>用户家目录</td><td>超管：/root 普通用户：/home/用户名</td></tr><tr><td>7</td><td>/bin/bash</td><td>用户登录系统后 （默认）命令解释器</td><td>/sbin/nologin 不允许登录系统 /bin/sh</td></tr></tbody></table><hr><p><code>/etc/shadow</code> 记录了系统中用户的密码信息。</p><figure><img src="`+c+`" alt="image-20240131173738484" tabindex="0" loading="lazy"><figcaption>image-20240131173738484</figcaption></figure><p>该文件每一行记录一个用户的密码信息，并且以<code>:</code> 作为分隔符，一共9 段内容。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>root:$6$T07ge8Py$.tZXOZIOpWq2sGZKEkKn2KMahL.mcyNrQrd3C3PIqNt8kA0p/K3JtG4Dwn4vyU2kSvyEg1K2xArTs61AG1Qo1/:18766:0:99999:7:::
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>字段序号</th><th>示例</th><th>含义</th><th>说明</th><th>可登录</th></tr></thead><tbody><tr><td>1</td><td>root</td><td>用户名</td><td></td><td></td></tr><tr><td>2</td><td>$6$T07ge8</td><td>密码密文</td><td>sha-512 HASH 散列算法 salt 值 加密后的密文</td><td></td></tr><tr><td>3</td><td>18766</td><td>密码修改时间</td><td>距离1970 年1 月1 日 密码最近一次的修改时间（天）</td><td></td></tr><tr><td>4</td><td>0</td><td>密码最短有效期</td><td>在最短有效期之内不能修改密码 3：三天之内不可以修改自己的密码 root 用户不受此限制</td><td></td></tr><tr><td>5</td><td>99999</td><td>密码最长有效期</td><td>密码可以使用多长时间 建议设置成90 天</td><td></td></tr><tr><td>6</td><td>7</td><td>密码过期时间</td><td>密码过期前7 天会有警告提示</td><td></td></tr><tr><td>7</td><td></td><td>密码的不活跃期</td><td>过了密码有效期没有修改密码， 处于不活跃期，仍然可以登录系统。</td><td></td></tr><tr><td>8</td><td></td><td>账户失效时间</td><td>密码距离1970 年1 月1 日的失效时间（天）</td><td></td></tr><tr><td>9</td><td></td><td>未分配功能</td><td></td><td></td></tr></tbody></table><p>密码密文结构</p><p>密码密文：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$6$T07ge8Py$.tZXOZIOpWq2sGZKEkKn2KMahL.mcyNrQrd3C3PIqNt8kA0p/K3JtG4Dwn4vyU2kSvyEg1K2xArTs61AG1Qo1/

$id$salt$encrypted

$加密方式$盐值（随机的）$密码密文
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行命令<code>man crypt</code>可以看到加密方式分别为什么</p><figure><img src="`+h+'" alt="image-20240131174339576" tabindex="0" loading="lazy"><figcaption>image-20240131174339576</figcaption></figure><p>攻击者可能会先获取这个密文，然后爆破出服务器密码。</p><hr><p><code>/etc/group</code> 保存了组信息。</p><figure><img src="'+u+`" alt="image-20240131175420177" tabindex="0" loading="lazy"><figcaption>image-20240131175420177</figcaption></figure><p>该文件的每一行记录了每一个组的信息，并且以<code>:</code> 作为分隔符，一共4 段内容。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>abcd:x:1000:
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><table><thead><tr><th>字段数</th><th>示例</th><th>含义</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>abcd</td><td>组名</td><td>用户组的名称，由字母或数字构成。</td></tr><tr><td>2</td><td>x</td><td>密码</td><td>x 是密码标识， 组密码默认保存在 /etc/gshadow 文件中。</td></tr><tr><td>3</td><td>1000</td><td>GID</td><td>Group ID</td></tr><tr><td>4</td><td>abcd</td><td>群组用户</td><td></td></tr></tbody></table><ul><li></li></ul><h2 id="_2-linux中的权限" tabindex="-1"><a class="header-anchor" href="#_2-linux中的权限" aria-hidden="true">#</a> 2. Linux中的权限</h2><p>在Linux中，权限被分为三个类型：读、写和执行。</p><p>每个文件或目录的权限由三个字符组成，分别表示<strong>所有者</strong>、<strong>所有者所在组</strong>和<strong>其他用户</strong>的权限。</p><ul><li>r（读权限）：表示有读取文件或目录内容的权限。</li><li>w（写权限）：表示有写入文件或目录内容的权限。</li><li>x（执行权限）：表示有执行文件或目录的权限。</li><li>-（无权限）：表示没有相应的权限。</li></ul><p>例如，一个文件的权限为“-rwxr-xr--”表示所有者有读、写、执行权限，所有者所在组有读、执行权限，其他用户只有读权限。</p><ol><li></li></ol>`,41);function v(x,_){const e=r("ExternalLinkIcon");return a(),n("div",null,[p,t("blockquote",null,[t("p",null,[d("["),t("a",m,[d("Linux 安全运维] 第三章 Linux 用户以及权限管理 - 知乎 (zhihu.com)"),l(e)])])]),b])}const D=i(g,[["render",v],["__file","1_Linux.html.vue"]]);export{D as default};
